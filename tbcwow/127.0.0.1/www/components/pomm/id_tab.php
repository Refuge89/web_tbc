<?php
/*
 * Project Name: MiniManager for Mangos Server
 * Date: 17.10.2006 inital version (0.0.1a)
 * Author: Q.SA
 * Copyright: Q.SA
 * Email: *****
 * License: GNU General Public License (GPL)
 */

 $lang_id_tab = array(
	// ----- ID_TAB.PHP -----
	//---maps---
	'azeroths' => 'Azeroths',
	'kalimdor' => 'Kalimdor',
	'test_zone' => 'Test Zone',
	'kalidar' => 'Kalidar',
	'alterac_valley' => 'Alterac Valley',
	'shadowfang_keep_instance' => 'Shadowfang Keep',
	'the_stockade_instance' => 'The Stockade',
	'stormwind_prison' => 'Stormwind Prison',
	'deadmines_instance' => 'Deadmines',
	'plains_of_snow' => 'Plains of Snow',
	'wailing_caverns_instance' => 'Wailing Caverns',
	'monastery_interior' => 'Monastery Interior',
	'razorfen_kraul_instance' => 'Razorfen Kraul',
	'blackfathom_deeps_instance' => 'Blackfathom Deeps',
	'uldaman_instance' => 'Uldaman',
	'gnomeregan_instance' => 'Gnomeregan',
	'sunken_temple_instance' => 'Sunken Temple',
	'razorfen_downs_instance' => 'Razorfen Downs',
	'outland' => 'Outland',
	'emerald_forest' => 'Emerald Forest',
	'scarlet_monastery_instance' => 'Scarlet Monastery',
	'zul_farrak_instance' => 'Zul\'Farrak',
	'blackrock_spire_instance' => 'Blackrock Spire',
	'blackrock_depths_instance' => 'Blackrock Depths',
	'onyxia_s_lair_instance' => 'Onyxia\'s Lair',
	'caverns_of_time' => 'Caverns of Time',
	'scholomance_instance' => 'Scholomance',
	'zul_gurub_instance' => 'Zul\'Gurub',
	'stratholme_instance' => 'Stratholme',
	'maraudon_instance' => 'Maraudon',
	'deeprun_tram' => 'Deeprun Tram',
	'ragefire_chasm_instance' => 'Ragefire Chasm',
	'the_molten_core_instance' => 'The Molten Core',
	'dire_maul_instance' => 'Dire Maul',
	'alliance_pvp_barracks' => 'Alliance PVP Barracks',
	'horde_pvp_barracks' => 'Horde PVP Barracks',
	'development_land' => 'Develop. Land',
	'blackwing_lair_instance' => 'Blackwing Lair',
	'warsong_gulch' => 'Warsong Gulch',
	'ruins_of_ahn_qiraj_instance' => 'Ruins of Ahn\'Qiraj',
	'arathi_basin' => 'Arathi Basin',
	'temple_of_ahn_qiraj_instance' => 'Temple of Ahn\'Qiraj',
	'naxxramas_instance' => 'Naxxramas',
	//tbc - maps
	'cot_black_morass' => 'The Black Morass',
	'karazahn' => 'Karazahn',
	'cot_hyjal_past' => 'Hyjal Past',
	'hellfire_military' => 'The Shattered Halls',
	'hellfire_demon' => 'The Blood Furnace',
	'hellfire_rampart' => 'Hellfire Ramparts',
	'hellfire_raid' => 'Magtheridon\'s Lair',
	'coilfang_pumping' => 'The Steamvault',
	'coilfang_marsh' => 'The Underbog',
	'coilfang_draenei' => 'The Slave Pens',
	'coilfang_raid' => 'Serpentshrine Cavern',
	'tempest_keep_raid' => 'Eye of the Storm',
	'tempest_keep_arcane' => 'The Arcatraz',
	'tempest_keep_atrium' => 'The Botanica',
	'tempest_keep_factory' => 'The Mechanar',
	'auchindoun_shadow' => 'Shadow Labyrinth',
	'auchindoun_arakkoa' => 'Sethekk Halls',
	'auchindoun_ethereal' => 'Mana-Tombs',
	'auchindoun_draenei' => 'Auchenai Crypts',
	'nagrand_arena' => 'Nagrand Arena',
	'cot_hillsbrad_past' => 'Old Hillsbrad Foothills',
	'blades_edge_arena' => 'Blade\'s Edge Arena',
	'black_temple' => 'Black Temple',
	'gruuls_lair' => 'Gruul\'s Lair',
	'netherstorm_arena' => 'Netherstorm Arena',
	'zulaman' => 'Zul\'Aman',
	//---class/race---
	'unknown' => 'Unknown',
	'warrior' => 'Warrior',
	'paladin' => 'Paladin',
	'hunter' => 'Hunter',
	'rogue' => 'Rogue',
	'priest' => 'Priest',
	'shaman' => 'Shaman',
	'mage' => 'Mage',
	'warlock' => 'Warlock',
	'druid' => 'Druid',
	'human' => 'Human',
	'orc' => 'Orc',
	'dwarf' => 'Dwarf',
	'nightelf' => 'NightElf',
	'undead' => 'Undead',
	'tauren' => 'Tauren',
	'gnome' => 'Gnome',
	'troll' => 'Troll',
	'goblin' => 'Goblin',
	'bloodelf' => 'BloodElf',
	'draenei' => 'Draenei',
	//---zone---
	'undercity' => 'Undercity',
	'ironforge' => 'Ironforge',
	'stormwind_city' => 'Stormwind City',
	'badlands' => 'Badlands',
	'wetlands' => 'Wetlands',
	'stranglethorn_vale' => 'Stranglethorn Vale',
	'redridge_mountains' => 'Redridge Mountains',
	'loch_modan' => 'Loch Modan',
	'duskwood' => 'Duskwood',
	'deadwind_pass' => 'Deadwind Pass',
	'elwynn_forest' => 'Elwynn Forest',
	'burning_steppes' => 'Burning Steppes',
	'searing_gorge' => 'Searing Gorge',
	'dun_morogh' => 'Dun Morogh',
	'the_hinterlands' => 'The Hinterlands',
	'westfall' => 'Westfall',
	'hillsbrad_foothills' => 'Hillsbrad Foothills',
	'eastern_plaguelands' => 'Eastern Plaguelands',
	'western_plaguelands' => 'Western Plaguelands',
	'silverpine_forest' => 'Silverpine Forest',
	'tirisfal_glades' => 'Tirisfal Glades',
	'blasted_lands' => 'Blasted Lands',
	'swamp_of_sorrows' => 'Swamp of Sorrows',
	'arathi_highlands' => 'Arathi Highlands',
	'alterac_mountains' => 'Alterac Mountains',
	'darnassus' => 'Darnassus',
	'thunder_bluff' => 'Thunder Bluff',
	'orgrimmar' => 'Orgrimmar',
	'moonglade' => 'Moonglade',
	'silithus' => 'Silithus',
	'winterspring' => 'Winterspring',
	'un_goro_crater' => 'Un\'Goro Crater',
	'felwood' => 'Felwood',
	'azshara' => 'Azshara',
	'tanaris' => 'Tanaris',
	'dustwallow_marsh' => 'Dustwallow Marsh',
	'mulgore' => 'Mulgore',
	'feralas' => 'Feralas',
	'desolace' => 'Desolace',
	'thousand_needles' => 'Thousand Needles',
	'durotar' => 'Durotar',
	'ashenvale' => 'Ashenvale',
	'darkshore' => 'Darkshore',
	'teldrassil' => 'Teldrassil',
	'stonetalon_mountains' => 'Stonetalon Mountains',
	'the_barrens' => 'The Barrens',
	//tbc- zones
	'shattrath_city' => 'Shattrath City',
	'silvermoon_city' => 'Silvermoon City',
	'netherstorm' => 'Netherstorm',
	'terokkar_forest' => 'Terokkar Forest',
	'nagrand' => 'Nagrand',
	'bloodmyst_isle' => 'Bloodmyst Isle',
	'blades_edge_mountains' => 'Blade\'s Edge Mountains',
	'shadowmoon_valley' => 'Shadowmoon Valley',
	'the_exodar' => 'The Exodar',
	'zangarmarsh' => 'Zangarmarsh',
	'hellfire_peninsula' => 'Hellfire Peninsula',
	'azuremyst_isle' => 'Azuremyst Isle',
	'ghostlands' => 'Ghostlands',
	'eversong_woods' => 'Eversong Woods'
	);

////////////////////////////////////////////////////////////////////////////////////////////////
//get map name by its id
//covered up to 2.0.6
$map_id = Array(
	0 => array(0,$lang_id_tab['azeroths']),
	1 => array(1,$lang_id_tab['kalimdor']),
	13 => array(13,$lang_id_tab['test_zone']),
	17 => array(17,$lang_id_tab['kalidar']),
	30 => array(30,$lang_id_tab['alterac_valley']),
	33 => array(33,$lang_id_tab['shadowfang_keep_instance']),
	34 => array(34,$lang_id_tab['the_stockade_instance']),
	35 => array(35,$lang_id_tab['stormwind_prison']),
	36 => array(36,$lang_id_tab['deadmines_instance']),
	37 => array(37,$lang_id_tab['plains_of_snow']),
	43 => array(43,$lang_id_tab['wailing_caverns_instance']),
	44 => array(44,$lang_id_tab['monastery_interior']),
	47 => array(47,$lang_id_tab['razorfen_kraul_instance']),
	48 => array(48,$lang_id_tab['blackfathom_deeps_instance']),
	70 => array(70,$lang_id_tab['uldaman_instance']),
	90 => array(90,$lang_id_tab['gnomeregan_instance']),
	109 => array(109,$lang_id_tab['sunken_temple_instance']),
	129 => array(129,$lang_id_tab['razorfen_downs_instance']),
	150 => array(150,$lang_id_tab['outland']),
	169 => array(169,$lang_id_tab['emerald_forest']),
	189 => array(189,$lang_id_tab['scarlet_monastery_instance']),
	209 => array(209,$lang_id_tab['zul_farrak_instance']),
	229 => array(229,$lang_id_tab['blackrock_spire_instance']),
	230 => array(230,$lang_id_tab['blackrock_depths_instance']),
	249 => array(249,$lang_id_tab['onyxia_s_lair_instance']),
	269 => array(269,$lang_id_tab['cot_black_morass']),
	289 => array(289,$lang_id_tab['scholomance_instance']),
	309 => array(309,$lang_id_tab['zul_gurub_instance']),
	329 => array(329,$lang_id_tab['stratholme_instance']),
	349 => array(349,$lang_id_tab['maraudon_instance']),
	369 => array(369,$lang_id_tab['deeprun_tram']),
	389 => array(389,$lang_id_tab['ragefire_chasm_instance']),
	409 => array(409,$lang_id_tab['the_molten_core_instance']),
	429 => array(429,$lang_id_tab['dire_maul_instance']),
	449 => array(449,$lang_id_tab['alliance_pvp_barracks']),
	450 => array(450,$lang_id_tab['horde_pvp_barracks']),
	451 => array(451,$lang_id_tab['development_land']),
	469 => array(469,$lang_id_tab['blackwing_lair_instance']),
	489 => array(489,$lang_id_tab['warsong_gulch']),
	509 => array(509,$lang_id_tab['ruins_of_ahn_qiraj_instance']),
	529 => array(529,$lang_id_tab['arathi_basin']),
	530 => array(530,$lang_id_tab['outland']),
	531 => array(531,$lang_id_tab['temple_of_ahn_qiraj_instance']),
	532 => array(532,$lang_id_tab['karazahn']),
	533 => array(533,$lang_id_tab['naxxramas_instance']),
	534 => array(534,$lang_id_tab['cot_hyjal_past']),
	540 => array(540,$lang_id_tab['hellfire_military']),
	542 => array(542,$lang_id_tab['hellfire_demon']),
	543 => array(543,$lang_id_tab['hellfire_rampart']),
	544 => array(544,$lang_id_tab['hellfire_raid']),
	545 => array(545,$lang_id_tab['coilfang_pumping']),
	546 => array(546,$lang_id_tab['coilfang_marsh']),
	547 => array(547,$lang_id_tab['coilfang_draenei']),
	548 => array(548,$lang_id_tab['coilfang_raid']),
	550 => array(550,$lang_id_tab['tempest_keep_raid']),
	552 => array(552,$lang_id_tab['tempest_keep_arcane']),
	553 => array(553,$lang_id_tab['tempest_keep_atrium']),
	554 => array(554,$lang_id_tab['tempest_keep_factory']),
	555 => array(555,$lang_id_tab['auchindoun_shadow']),
	556 => array(556,$lang_id_tab['auchindoun_arakkoa']),
	557 => array(557,$lang_id_tab['auchindoun_ethereal']),
	558 => array(558,$lang_id_tab['auchindoun_draenei']),
	559 => array(559,$lang_id_tab['nagrand_arena']),
	560 => array(560,$lang_id_tab['cot_hillsbrad_past']),
	562 => array(562,$lang_id_tab['blades_edge_arena']),
	564 => array(564,$lang_id_tab['black_temple']),
	565 => array(565,$lang_id_tab['gruuls_lair']),
	566 => array(566,$lang_id_tab['netherstorm_arena']),
	568 => array(568,$lang_id_tab['zulaman'])
);

function get_map_name($id){
global $lang_id_tab, $map_id;
	if( isset($map_id[$id])) return $map_id[$id][1];
		else  return($lang_id_tab['unknown']);
}		

////////////////////////////////////////////////////////////////////////////////////////////////
//get player class by its id
function get_player_class($class_id){
global $lang_id_tab;
switch ($class_id) {
case 1:
   return($lang_id_tab['warrior']);
   break;
case 2:
   return($lang_id_tab['paladin']);
   break;
case 3:
   return($lang_id_tab['hunter']);
   break;
case 4:
   return($lang_id_tab['rogue']);
   break;
case 5:
   return($lang_id_tab['priest']);
   break;
case 7:
   return($lang_id_tab['shaman']);
   break;
case 8:
   return($lang_id_tab['mage']);
   break;
case 9:
   return($lang_id_tab['warlock']);
   break;
case 11:
   return($lang_id_tab['druid']);
   break;
default:
    return($lang_id_tab['unknown']);
 }
}

////////////////////////////////////////////////////////////////////////////////////////////////
//get player race by its id
function get_player_race($race_id){
global $lang_id_tab;
switch ($race_id) {
case 1:
   return($lang_id_tab['human']);
   break;
case 2:
   return($lang_id_tab['orc']);
   break;
case 3:
   return($lang_id_tab['dwarf']);
   break;
case 4:
   return($lang_id_tab['nightelf']);
   break;
case 5:
   return($lang_id_tab['undead']);
   break;
case 6:
   return($lang_id_tab['tauren']);
   break;
case 7:
   return($lang_id_tab['gnome']);
   break;
case 8:
   return($lang_id_tab['troll']);
   break;
case 9:
   return($lang_id_tab['goblin']);
   break;
case 10:
   return($lang_id_tab['bloodelf']);
   break;
case 11:
   return($lang_id_tab['draenei']);
   break;
default:
    return($lang_id_tab['unknown']);
 }
}

////////////////////////////////////////////////////////////////////////////////////////////////
//get zone name by mapid and players x,y 
// Y1 ,Y2,X1,X2 - Upper left Y Coord of Box, Lower Right Y Coord of Box, Lower Right X Coord of Box, Upper Left X Coord of Box
$zone_0 = Array( //Azeroth
	0 => Array(700,10,1244,1873,$lang_id_tab['undercity'],1497),
	1 => Array(-840,-1330,-5050,-4560,$lang_id_tab['ironforge'],1537),
	2 => Array(1190,200,-9074,-8280,$lang_id_tab['stormwind_city'],1519),
	3 => Array(-2170,-4400,-7348,-6006,$lang_id_tab['badlands'],3),
	4 => Array(-500,-4400,-4485,-2367,$lang_id_tab['wetlands'],11),
	5 => Array(2220,-2250,-15422,-11299,$lang_id_tab['stranglethorn_vale'],33),
	6 => Array(-1724,-3540,-9918,-8667,$lang_id_tab['redridge_mountains'],44),
	7 => Array(-2480,-4400,-6006,-4485,$lang_id_tab['loch_modan'],38),
	8 => Array(662,-1638,-11299,-9990,$lang_id_tab['duskwood'],10),
	9 => Array(-1638,-2344,-11299,-9918,$lang_id_tab['deadwind_pass'],41),
	10 => Array(834,-1724,-9990,-8526,$lang_id_tab['elwynn_forest'],12),
	11 => Array(-500,-3100,-8667,-7348,$lang_id_tab['burning_steppes'],46),
	12 => Array(-608,-2170,-7348,-6285,$lang_id_tab['searing_gorge'],51),
	13 => Array(2000,-2480,-6612,-4485,$lang_id_tab['dun_morogh'],1),
	14 => Array(-1575,-5425,-432,805,$lang_id_tab['the_hinterlands'],47),
	15 => Array(3016,662,-11299,-9400,$lang_id_tab['westfall'],40),
	16 => Array(600,-1575,-1874,220,$lang_id_tab['hillsbrad_foothills'],267),
	17 => Array(-2725,-6056,805,3800,$lang_id_tab['eastern_plaguelands'],139),
	18 => Array(-850,-2725,805,3400,$lang_id_tab['western_plaguelands'],28),
	19 => Array(2200,600,-900,1525,$lang_id_tab['silverpine_forest'],130),
	20 => Array(2200,-850,1525,3400,$lang_id_tab['tirisfal_glades'],85),
	21 => Array(-2250,-3520,-12800,-10666,$lang_id_tab['blasted_lands'],4),
	22 => Array(-2344,-4516,-11070,-9600,$lang_id_tab['swamp_of_sorrows'],8),
	23 => Array(-1575,-3900,-2367,-432,$lang_id_tab['arathi_highlands'],45),
	24 => Array(600,-1575,220,1525,$lang_id_tab['alterac_mountains'],36)
 	);

$zone_1 = Array( //Kalimdor
	0 => Array(2698,2030,9575,10267,$lang_id_tab['darnassus'],1657),
	1 => Array(326,-360,-1490,-910,$lang_id_tab['thunder_bluff'],1638),
	2 => Array(-3849,-4809,1387,2222,$lang_id_tab['orgrimmar'],1637),
	3 => Array(-1300,-3250,7142,8500,$lang_id_tab['moonglade'],493),
	4 => Array(2021,-400,-9000,-6016,$lang_id_tab['silithus'],1377),
	5 => Array(-2259,-7000,4150,8500,$lang_id_tab['winterspring'],618),
	6 => Array(-400,-2094,-8221,-6016,$lang_id_tab['un_goro_crater'],490),
	7 => Array(-590,-2259,3580,7142,$lang_id_tab['felwood'],361),
	8 => Array(-3787,-8000,1370,6000,$lang_id_tab['azshara'],16),
	9 => Array(-1900,-5500,-10475,-6825,$lang_id_tab['tanaris'],440),
	10 => Array(-2478,-5500,-5135,-2330,$lang_id_tab['dustwallow_marsh'],15),
	11 => Array(360,-1536,-3474,-412,$lang_id_tab['mulgore'],215),
	12 => Array(4000,-804,-6828,-2477,$lang_id_tab['feralas'],357),
	13 => Array(3500,360,-2477,372,$lang_id_tab['desolace'],405),
	14 => Array(-804,-5500,-6828,-4566,$lang_id_tab['thousand_needles'],400),
	15 => Array(-3758,-5500,-1300,1370,$lang_id_tab['durotar'],14),
	16 => Array(1000,-3787,1370,4150,$lang_id_tab['ashenvale'],331),
	17 => Array(2500,-1300,4150,8500,$lang_id_tab['darkshore'],148),
	18 => Array(3814,-1100,8600,11831,$lang_id_tab['teldrassil'],141),
	19 => Array(3500,-804,-412,3580,$lang_id_tab['stonetalon_mountains'],406),
	20 => Array(-804,-4200,-4566,1370,$lang_id_tab['the_barrens'],17)
	);

$zone_530 = Array( //Outland
	0 => Array(6135.25,4829,-2344.78,-1473.95,$lang_id_tab['shattrath_city'],3703),
	1 => Array(-6400.75,-7612.20,9346.93,10153.70,$lang_id_tab['silvermoon_city'],3487),
	2 => Array(5483.33,-91.66,1739.58,5456.25,$lang_id_tab['netherstorm'],3523),
	3 => Array(7083.33,1683.33,-4600,-999.99,$lang_id_tab['terokkar_forest'],3519),
	4 => Array(10295.83,4770.83,-3641.66,41.66,$lang_id_tab['nagrand'],3518),
	5 => Array(-10075,-13337.49,-2933.33,-758.33,$lang_id_tab['bloodmyst_isle'],3525),
	6 => Array(8845.83,3420.83,791.66,4408.33,$lang_id_tab['blades_edge_mountains'],3522),
	7 => Array(4225,-1275,-5614.58,-1947.91,$lang_id_tab['shadowmoon_valley'],3520),
	8 => Array(-11066.36,-12123.13,-4314.37,-3609.68,$lang_id_tab['the_exodar'],3557),
	9 => Array(9475,4447.91,-1416.66,1935.41,$lang_id_tab['zangarmarsh'],3521),
	10 => Array(5539.58,375,-1962.49,1481.25,$lang_id_tab['hellfire_peninsula'],3483),
	11 => Array(-10500,-14570.83,-5508.33,-2793.75,$lang_id_tab['azuremyst_isle'],3524),
	12 => Array(-5283.33,-8583.33,6066.66,8266.66,$lang_id_tab['ghostlands'],3433),
	13 => Array(-4487.5,-9412.5,7758.33,11041.66,$lang_id_tab['eversong_woods'],3430)
);

// Y1 ,Y2,X1,X2 - Upper left Y Coord of Box, Lower Right Y Coord of Box, Upper Left X Coord of Box,  Lower Right X Coord of Box
function get_zone_name($map_id,$player_x,$player_y){
 global $zone_0,$zone_1,$zone_530;
 switch ($map_id) {
	case 0:
	for ($i=0; $i < count($zone_0); $i++)
		if (($zone_0[$i][2] < $player_x) && ($zone_0[$i][3] > $player_x) && ($zone_0[$i][1] < $player_y) && ($zone_0[$i][0] > $player_y)) return ($zone_0[$i][4]);
	break;
	case 1:
	for ($i=0; $i < count($zone_1); $i++)
		if (($zone_1[$i][2] < $player_x) && ($zone_1[$i][3] > $player_x) && ($zone_1[$i][1] < $player_y) && ($zone_1[$i][0] > $player_y)) return ($zone_1[$i][4]);
	break;
	case 530:
	for ($i=0; $i < count($zone_530); $i++)
		if (($zone_530[$i][2] < $player_x) && ($zone_530[$i][3] > $player_x) && ($zone_530[$i][1] < $player_y) && ($zone_530[$i][0] > $player_y)) return ($zone_530[$i][4]);
	break;

	default:
	return(" ");
	}
}

?>